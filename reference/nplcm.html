<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Uses JAGS (OSX or Windows) operating system for Bayesian posterior inference
(see README file for an instruction to install JAGS). If running JAGS on windows,
please go to control panel to add the directory to JAGS into ENVIRONMENTAL VARIABLE."><title>Fit nested partially-latent class models (highest-level wrapper function) — nplcm • baker</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fit nested partially-latent class models (highest-level wrapper function) — nplcm"><meta property="og:description" content="Uses JAGS (OSX or Windows) operating system for Bayesian posterior inference
(see README file for an instruction to install JAGS). If running JAGS on windows,
please go to control panel to add the directory to JAGS into ENVIRONMENTAL VARIABLE."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">baker</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/baker_demo.html">Vignettes for baker: An R package for fitting nested partially latent class models</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/zhenkewu/baker/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fit nested partially-latent class models (highest-level wrapper function)</h1>
      <small class="dont-index">Source: <a href="https://github.com/zhenkewu/baker/blob/HEAD/R/nplcm.R" class="external-link"><code>R/nplcm.R</code></a></small>
      <div class="d-none name"><code>nplcm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uses <code>JAGS</code> (OSX or Windows) operating system for Bayesian posterior inference
(see <code>README</code> file for an instruction to install <code>JAGS</code>). If running <code>JAGS</code> on windows,
please go to control panel to add the directory to <code>JAGS</code> into ENVIRONMENTAL VARIABLE.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nplcm</span><span class="op">(</span><span class="va">data_nplcm</span>, <span class="va">model_options</span>, <span class="va">mcmc_options</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data_nplcm</dt>
<dd><p>Cases are on top of controls in the rows of diagnostic
test results and the covariate matrix. This is assumed by <code>baker</code> to automatically
write model files (<code>.bug</code>).</p><ul><li><p><code>Mobs</code> A list of measurements of distinct qualities (Bronze-, Silver, and Gold-Standard:
<code>MBS</code>,<code>MSS</code>,<code>MGS</code>). The elements of the list
should include <code>MBS</code>, <code>MSS</code>, and <code>MGS</code>. If any of the component
is not available, please specify it as, e.g., <code>MGS=NULL</code>
(effectively deleting <code>MGS</code> from <code>Mobs</code>).</p><ul><li><p><code>MBS</code> a list of data frame of bronze-standard (BrS) measurements.
For each data frame (referred to as a 'slice'),
rows are subjects, columns are causative agents (e.g., pathogen species).
We use <code>list</code> here to accommodate the possibility of multiple sets of BrS data.
They have imperfect sensitivity/specificity (e.g. nasopharyngeal polymerase chain
reaction - NPPCR).</p></li>
<li><p><code>MSS</code> a list of data frame of silver-standard (SS) measurements.
Rows are subjects, columns are causative agents measured in specimen (e.g. blood culture).
These measurements have perfect specificity but imperfect sensitivity.</p></li>
<li><p><code>MGS</code> a list of data frame of gold-standard (GS) measurements.
Rows are subject, columns are measured causative agents
These measurements have perfect sensitivity and specificity.</p></li>
</ul></li>
<li><p><code>Y</code> Vector of disease status: <code>1</code> for case, <code>0</code> for control.</p></li>
<li><p><code>X</code> Covariate matrix. A subset of columns are primary covariates in cause-specific-
case-fraction (CSCF) functions and hence must be available for cases, and another subset
are covariates that are available in the cases and the controls.
The two sets of covariates may be identical, overlapping or completely different.
In general, this is not the design matrix for regression models,
because for enrollment date in a study which may have non-linear effect,
basis expansion is often needed for approximation.</p></li>
</ul></dd>


<dt>model_options</dt>
<dd><p>A list of model options: likelihood and prior.</p><dl><dt><code>use_measurements</code></dt>
<dd><p>A vector of characters strings; can be one or more from <code>"BrS"</code>, <code>"SS"</code>, <code>"GS"</code>.</p></dd>

<dt><code>likelihood</code></dt>
<dd>
<dl><dt>cause_list</dt>
<dd><p>The vector of causes (NB: specify);</p></dd>

<dt>k_subclass</dt>
<dd><p>The number of nested subclasses in each
disease class (one of case classes or the control class; the same <code>k_subclass</code>
is assumed for each class) and each slice of BrS measurements.
<code>1</code> for conditional independence; larger than <code>1</code> for conditional dependence.
It is only available for BrS measurements. It is a vector of length equal to
the number of slices of BrS measurements;</p></dd>

<dt>Eti_formula</dt>
<dd><p>Formula for etiology regressions. You can use
<code><a href="s_date_Eti.html">s_date_Eti()</a></code> to specify the design matrix for <code>R</code> format enrollment date;
it will produce natural cubic spline basis. Specify <code>~ 1</code> if no regression is intended.</p></dd>

<dt>FPR_formula</dt>
<dd><p>formula for false positive rates (FPR) regressions; see <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula()</a></code>.
You can use <code><a href="s_date_FPR.html">s_date_FPR()</a></code> to specify part of the design matrix for <code>R</code>
format enrollment date; it will produce penalized-spline basis (based on B-splines).
Specify <code>~ 1</code> if no regression is intended. (NB: If <code>effect="fixed"</code>, <code><a href="dm_Rdate_FPR.html">dm_Rdate_FPR()</a></code>
will just specify a design matrix with appropriately standardized dates.)</p></dd>


</dl></dd>


<dt><code>prior</code></dt>
<dd>
<dl><dt>Eti_prior</dt>
<dd><p>Description of etiology prior (e.g., <code>overall_uniform</code> -
all hyperparameters are <code>1</code>; or <code>0_1</code> - all hyperparameters are <code>0.1</code>);</p></dd>

<dt>TPR_prior</dt>
<dd><p>Description of priors for the measurements
(e.g., informative vs non-informative). Its length should be the
same as <code>use_measurements</code> above. Please see examples for how to specify.
The package can also handle multiple slices of BrS, SS data, so separate
specification of the TPR priors are needed.</p></dd>


</dl></dd>


</dl></dd>


<dt>mcmc_options</dt>
<dd><p>A list of Markov chain Monte Carlo (MCMC) options.</p><ul><li><p><code>debugstatus</code> Logical - whether to pause WinBUGS after it finishes
model fitting; (NB: is this obsolete? Test.)</p></li>
<li><p><code>n.chains</code> Number of MCMC chains;</p></li>
<li><p><code>n.burnin</code> Number of burn-in iterations;</p></li>
<li><p><code>n.thin</code> To keep every other <code>n.thin</code> samples after burn-in period;</p></li>
<li><p><code>individual.pred</code> <code>TRUE</code> to perform individual prediction (<code>Icat</code>
variables in the <code>.bug</code> file); <code>FALSE</code> otherwise;</p></li>
<li><p><code>ppd</code> <code>TRUE</code> to simulate new data (<code>XXX.new</code>
variables in the <code>.bug</code> file) from the posterior predictive distribution (ppd);
<code>FALSE</code> otherwise;</p></li>
<li><p><code>get.pEti</code> <code>TRUE</code> for getting posterior samples of individual etiologic fractions;
<code>FALSE</code> otherwise. For non-regression, or regression models with all discrete predictors,
by default this is <code>TRUE</code>, so no need to specify this entry. It is only relevant for regression models
with non-discrete covariates. Because individuals have distinct CSCFs at their specific covariate values,
it's easier to just store the posterior samples of the regression coefficients and reconstruct the pies afterwards,
rather than storing them through <code>JAGS</code>.</p></li>
<li><p><code>result.folder</code> Path to folder storing the results;</p></li>
<li><p><code>bugsmodel.dir</code> Path to <code>.bug</code> model files;</p></li>
<li><p><code>jags.dir</code> Path to where JAGS is installed; if <code>NULL</code>, this will be set
to <code>jags.dir=""</code>.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>JAGS</code> output result, fitted by function <code><a href="https://rdrr.io/pkg/R2jags/man/jags.html" class="external-link">R2jags::jags2()</a></code> from <code>R2jags</code>.
It is an object of class <code>nplcm</code> and <code>bugs</code>.
Current implemented models follow the hierarchy below:</p><ul><li><p>no regression:  Fitted by at low level by <a href="nplcm_fit_NoReg.html">nplcm_fit_NoReg</a></p></li>
<li><p>regression:
Given disease class (control or a class of cases with the same subset of causative agents):</p><ul><li><p>local independence model for BrS measures:
Fitted at lower level by</p><ul><li><p><a href="nplcm_fit_Reg_NoNest.html">nplcm_fit_Reg_NoNest</a> deals with the setting with two sets of covariates,
one for CSCF regression and the other for FPR regression. The two sets of
covariates may be identical, overlapping or non-overlapping.
This function is called when there exists one or more than one discrete covariate among
the union of the two covariate sets. The method implemented by this function
directly lets FPR depend upon covariates.
This is different from Wu and Chen (2021), which let the subclass
weights depend upon covariates. We implemented this function for methods comparison.</p></li>
<li><p><a href="nplcm_fit_Reg_discrete_predictor_NoNest.html">nplcm_fit_Reg_discrete_predictor_NoNest</a> deals with the setting
with all discrete covariates for FPRs and CSCFs. The strata defined by the two sets of
covariates need not be identical, e.g., as a result of distinct sets of covariates. Again,
this is directly to let FPR be stratified by covariates, hence different from Wu and Chen (2020+)
We implemented this function for methods comparison.</p></li>
</ul></li>
<li><p>local dependence model for BrS measures:
Fitted at lower level by <a href="nplcm_fit_Reg_Nest.html">nplcm_fit_Reg_Nest</a>: This is the method introduced in
Wu and Chen (2021): CSCF regression + case/control subclass weight regression.
It does not provide a specialized function for the setting with all discrete covariates.</p></li>
</ul></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_nplcm_noreg</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cause_list</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">J.BrS</span>      <span class="op">&lt;-</span> <span class="fl">6</span></span></span>
<span class="r-in"><span><span class="va">model_options_no_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  likelihood   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    cause_list <span class="op">=</span> <span class="va">cause_list</span>,</span></span>
<span class="r-in"><span>    k_subclass <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>    Eti_formula <span class="op">=</span> <span class="op">~</span><span class="op">-</span><span class="fl">1</span>, <span class="co"># no covariate for the etiology regression</span></span></span>
<span class="r-in"><span>    FPR_formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      MBS1 <span class="op">=</span>   <span class="op">~</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>    <span class="co"># no covariate for the subclass weight regression</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  use_measurements <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BrS"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  <span class="co"># use bronze-standard data only for model estimation.</span></span></span>
<span class="r-in"><span>  prior<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    Eti_prior <span class="op">=</span> <span class="fu"><a href="overall_uniform.html">overall_uniform</a></span><span class="op">(</span><span class="fl">1</span>,<span class="va">cause_list</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    <span class="co"># Dirichlet(1,...,1) prior for the etiology.</span></span></span>
<span class="r-in"><span>    TPR_prior  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>BrS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      info  <span class="op">=</span> <span class="st">"informative"</span>, <span class="co"># informative prior for TPRs</span></span></span>
<span class="r-in"><span>      input <span class="op">=</span> <span class="st">"match_range"</span>, </span></span>
<span class="r-in"><span>      <span class="co"># specify the informative prior for TPRs by specifying a plausible range.</span></span></span>
<span class="r-in"><span>      val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>MBS1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>up <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.99</span>,<span class="va">J.BrS</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                             <span class="co"># upper ranges: matched to 97.5% quantile of a Beta prior</span></span></span>
<span class="r-in"><span>                             low <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.55</span>,<span class="va">J.BrS</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="co"># lower ranges: matched to 2.5% quantile of a Beta prior</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span>     </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># include stratification information in file name:</span></span></span>
<span class="r-in"><span><span class="va">thedir</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"_no_reg"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create folders to store the model results </span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">thedir</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result_folder_no_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">thedir</span>,<span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"results"</span>,collapse<span class="op">=</span><span class="st">"_"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">thedir</span> <span class="op">&lt;-</span> <span class="va">result_folder_no_reg</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">thedir</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># options for MCMC chains:</span></span></span>
<span class="r-in"><span><span class="va">mcmc_options_no_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  debugstatus <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  n.chains <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  n.itermcmc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">200</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  n.burnin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  n.thin <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  individual.pred <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># &lt;- must set to TRUE! &lt;------- NOTE! </span></span></span>
<span class="r-in"><span>  ppd <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  result.folder <span class="op">=</span> <span class="va">thedir</span>,</span></span>
<span class="r-in"><span>  bugsmodel.dir <span class="op">=</span> <span class="va">thedir</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">BrS_object_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_meas_object.html">make_meas_object</a></span><span class="op">(</span>patho <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, </span></span>
<span class="r-in"><span>                                 specimen <span class="op">=</span> <span class="st">"MBS"</span>, test <span class="op">=</span> <span class="st">"1"</span>, </span></span>
<span class="r-in"><span>                                 quality <span class="op">=</span> <span class="st">"BrS"</span>, cause_list <span class="op">=</span> <span class="va">cause_list</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">clean_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>BrS_objects <span class="op">=</span> <span class="fu"><a href="make_list.html">make_list</a></span><span class="op">(</span><span class="va">BrS_object_1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># place the nplcm data and cleaning options into the results folder</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput</a></span><span class="op">(</span><span class="va">data_nplcm_noreg</span>,<span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">thedir</span>,<span class="st">"data_nplcm.txt"</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput</a></span><span class="op">(</span><span class="va">clean_options</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">thedir</span>, <span class="st">"data_clean_options.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">rjags</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rjags/man/jags.module.html" class="external-link">load.module</a></span><span class="op">(</span><span class="st">"glm"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">nplcm_noreg</span> <span class="op">&lt;-</span> <span class="fu">nplcm</span><span class="op">(</span><span class="va">data_nplcm_noreg</span>,<span class="va">model_options_no_reg</span>,<span class="va">mcmc_options_no_reg</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ==[baker] Results stored in: == </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  /tmp/Rtmp4s3Hfx_no_reg/results </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Zhenke Wu, Scott Zeger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

